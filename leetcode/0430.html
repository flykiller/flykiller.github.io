<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 0430. Flatten a Multilevel Doubly Linked List | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 0430. Flatten a Multilevel Doubly Linked List" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="https://leetcode.com/problems/flatten-a-multilevel-doubly-linked-list" />
<meta property="og:description" content="https://leetcode.com/problems/flatten-a-multilevel-doubly-linked-list" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-06-01T23:39:34+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 0430. Flatten a Multilevel Doubly Linked List" />
<script type="application/ld+json">
{"url":"/leetcode/0430.html","@type":"BlogPosting","headline":"Leetcode 0430. Flatten a Multilevel Doubly Linked List","dateModified":"2021-06-01T23:39:34+02:00","datePublished":"2021-06-01T23:39:34+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/0430.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"https://leetcode.com/problems/flatten-a-multilevel-doubly-linked-list","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/leetcode%20problems/">Leetcode problems</a><a class="page-link" href="/coding%20ideas/">Patterns</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/dfs"><code class="highligher-rouge"><nobr>dfs</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/linked list"><code class="highligher-rouge"><nobr>linked list</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/stack"><code class="highligher-rouge"><nobr>stack</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 0430. Flatten a Multilevel Doubly Linked List</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-06-01T23:39:34+02:00" itemprop="datePublished">
        Jun 1, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><a href="https://leetcode.com/problems/flatten-a-multilevel-doubly-linked-list"> <font color="blue">https://leetcode.com/problems/flatten-a-multilevel-doubly-linked-list</font></a></p>

<p>In this problem we need to traverse our multilevel doubly linked list in some special order and rebuild some connections. We can consider our list as graph, which we now need to traverse. What graph traversal algorighms do we know? We should think about dfs and bfs. Why I choose dfs? Because we need to traverse as deep as possible, before we traverse neibhour nodes, and that is what dfs do exactly! When you realise this, problem becomes much more easier. So, algorighm look like:</p>

<ol>
  <li>Put <code class="language-plaintext highlighter-rouge">head</code> of our list to stack and start to traverse it: <code class="language-plaintext highlighter-rouge">pop</code> element from it and add two two elements instead: its <code class="language-plaintext highlighter-rouge">next</code> and its <code class="language-plaintext highlighter-rouge">child</code>. The order is <strong>important</strong>: we first want to visit <code class="language-plaintext highlighter-rouge">child</code> and then <code class="language-plaintext highlighter-rouge">next</code>, that is why we put <code class="language-plaintext highlighter-rouge">child</code> to the top of our stack.</li>
  <li>Each time we <code class="language-plaintext highlighter-rouge">pop</code> last element from stack, I write it to auxilary <code class="language-plaintext highlighter-rouge">order</code> list.</li>
  <li>Last step is to rebuild from our <code class="language-plaintext highlighter-rouge">order</code> list flattened doubly linked list.</li>
</ol>

<p><strong>Complexity</strong>: time complexity is <code class="language-plaintext highlighter-rouge">O(n)</code>, where <code class="language-plaintext highlighter-rouge">n</code> is number of nodes in our list. In this approach we also use <code class="language-plaintext highlighter-rouge">O(n)</code> additional space, because I keep <code class="language-plaintext highlighter-rouge">order</code> list. This can be avoid, if we make connections on the fly, but it is a bit less intuitive in my opinion, but ofcourse more optimal in space complexity.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">flatten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">head</span><span class="p">:</span> <span class="k">return</span> <span class="n">head</span>
        <span class="n">stack</span><span class="p">,</span> <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="n">head</span><span class="p">],</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="n">stack</span><span class="p">:</span>
            <span class="n">last</span> <span class="o">=</span> <span class="n">stack</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">order</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">last</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">last</span><span class="p">.</span><span class="nb">next</span><span class="p">:</span>
                <span class="n">stack</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">last</span><span class="p">.</span><span class="nb">next</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">last</span><span class="p">.</span><span class="n">child</span><span class="p">:</span>
                <span class="n">stack</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">last</span><span class="p">.</span><span class="n">child</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">].</span><span class="n">prev</span> <span class="o">=</span> <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nb">next</span> <span class="o">=</span> <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">child</span> <span class="o">=</span> <span class="bp">None</span>
            
        <span class="k">return</span> <span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>

<p><strong>Solution without extra array</strong>: the same idea, where we reconnect our nodes directly, without <code class="language-plaintext highlighter-rouge">order</code> array. It is <code class="language-plaintext highlighter-rouge">O(h)</code> in memory, where <code class="language-plaintext highlighter-rouge">h</code> is number of levels (in the worst case it will be <code class="language-plaintext highlighter-rouge">O(n)</code>).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">flatten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">head</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">head</span><span class="p">:</span> <span class="k">return</span> <span class="n">head</span>
        
        <span class="n">dummy</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">curr</span><span class="p">,</span> <span class="n">stack</span> <span class="o">=</span> <span class="n">dummy</span><span class="p">,</span> <span class="p">[</span><span class="n">head</span><span class="p">]</span>
        <span class="k">while</span> <span class="n">stack</span><span class="p">:</span>
            <span class="n">last</span> <span class="o">=</span> <span class="n">stack</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span> 
            <span class="k">if</span> <span class="n">last</span><span class="p">.</span><span class="nb">next</span><span class="p">:</span>
                <span class="n">stack</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">last</span><span class="p">.</span><span class="nb">next</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">last</span><span class="p">.</span><span class="n">child</span><span class="p">:</span>
                <span class="n">stack</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">last</span><span class="p">.</span><span class="n">child</span><span class="p">)</span>
            <span class="n">curr</span><span class="p">.</span><span class="nb">next</span> <span class="o">=</span> <span class="n">last</span>
            <span class="n">last</span><span class="p">.</span><span class="n">prev</span> <span class="o">=</span> <span class="n">curr</span>  
            <span class="n">last</span><span class="p">.</span><span class="n">child</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">curr</span> <span class="o">=</span> <span class="n">last</span>
        
        <span class="n">res</span> <span class="o">=</span> <span class="n">dummy</span><span class="p">.</span><span class="nb">next</span>
        <span class="n">res</span><span class="p">.</span><span class="n">prev</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="n">res</span>
</code></pre></div></div>

<p>If you like the solution, you can <strong>upvote</strong> it on leetcode discussion section:<a href="https://leetcode.com/problems/flatten-a-multilevel-doubly-linked-list/discuss/728266/python-dfs-with-stack-exaplained"> <font color="blue">Problem 0430</font></a></p>

  </div><a class="u-url" href="/leetcode/0430.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>