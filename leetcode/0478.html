<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 0478. Generate Random Point in a Circle | Dmitry Babichev’s webpage</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 0478. Generate Random Point in a Circle" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="https://leetcode.com/problems/generate-random-point-in-a-circle" />
<meta property="og:description" content="https://leetcode.com/problems/generate-random-point-in-a-circle" />
<meta property="og:site_name" content="Dmitry Babichev’s webpage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-31T14:30:22+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 0478. Generate Random Point in a Circle" />
<script type="application/ld+json">
{"url":"/leetcode/0478.html","@type":"BlogPosting","headline":"Leetcode 0478. Generate Random Point in a Circle","dateModified":"2022-01-31T14:30:22+03:00","datePublished":"2022-01-31T14:30:22+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/0478.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"https://leetcode.com/problems/generate-random-point-in-a-circle","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev's webpage" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev&#39;s webpage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/codeforces%20problems/">Codeforces</a><a class="page-link" href="/leetcode%20problems/">Leetcode</a><a class="page-link" href="/binarysearch%20problems/">BinarySearch</a><a class="page-link" href="/coding%20ideas/">Patterns</a><a class="page-link" href="/performance%20tricks/">Speed up</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
    
    <a href="/tag/math"><code class="highligher-rouge"><nobr>math</nobr></code>&nbsp;</a>
  
    
    <a href="/tag/random"><code class="highligher-rouge"><nobr>random</nobr></code>&nbsp;</a>
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 0478. Generate Random Point in a Circle</h1>
    <p class="post-meta"><time class="dt-published" datetime="2022-01-31T14:30:22+03:00" itemprop="datePublished">
        Jan 31, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><a href="https://leetcode.com/problems/generate-random-point-in-a-circle"> <font color="blue">https://leetcode.com/problems/generate-random-point-in-a-circle</font></a></p>

<p>Imagine first special case for this problem: we have circle with radius equal to <code class="language-plaintext highlighter-rouge">1</code> and coordinates of center is <code class="language-plaintext highlighter-rouge">(0, 0)</code>. Let us use polar coordinates:
<code class="language-plaintext highlighter-rouge">x = R * cos(theta)</code>
<code class="language-plaintext highlighter-rouge">y = R * sin(theta)</code>.</p>

<p><img src="https://assets.leetcode.com/users/images/0a8d83b0-69fb-4ee7-866b-91fce8ddfb2f_1615969976.4114075.png" alt="closed_paren" title="Closed Parenthesis" width="250" height="250" /></p>

<p>Here <code class="language-plaintext highlighter-rouge">R</code> is distance between our point (call it <code class="language-plaintext highlighter-rouge">A</code>) and the origin (call it <code class="language-plaintext highlighter-rouge">O</code>). <code class="language-plaintext highlighter-rouge">theta</code> is angle between <code class="language-plaintext highlighter-rouge">OA</code> and axis <code class="language-plaintext highlighter-rouge">OX</code>.
Why it is good idea to go to polar coordinates here? Because in polar coordiantes unity circle can be written as:
<code class="language-plaintext highlighter-rouge">R &lt;= 1</code>
<code class="language-plaintext highlighter-rouge">0 &lt;= theta &lt;= 2*pi</code>.</p>

<p>Now we need to answer two qustions: how to generate <code class="language-plaintext highlighter-rouge">R</code> and how to generate <code class="language-plaintext highlighter-rouge">theta</code>.</p>

<ol>
  <li>About <code class="language-plaintext highlighter-rouge">theta</code> it is quite obvious: we do it uniformly.</li>
  <li>About <code class="language-plaintext highlighter-rouge">R</code> it is not obvious: if we do it uniformly, there will be more points closer if we generate it in uniform way. Look at this intuition: let us fix <code class="language-plaintext highlighter-rouge">R = 1</code> and generate <code class="language-plaintext highlighter-rouge">10</code>  points, then fix <code class="language-plaintext highlighter-rouge">R = 0.5</code> and generate <code class="language-plaintext highlighter-rouge">10</code> more points. What you can see? Distance between points on the big circle is in average <code class="language-plaintext highlighter-rouge">2</code> times bigger, than between <code class="language-plaintext highlighter-rouge">2</code> points on smaller circle. It actually means, that for small circle you need to generate only <code class="language-plaintext highlighter-rouge">5</code> points, not <code class="language-plaintext highlighter-rouge">10</code>, and by this logic if you have <code class="language-plaintext highlighter-rouge">x</code> points for circle with <code class="language-plaintext highlighter-rouge">R = 1</code>, you need <code class="language-plaintext highlighter-rouge">x*R</code> points for smaller radius.</li>
</ol>

<p><img src="https://assets.leetcode.com/users/images/d8f828cb-bf5a-40dc-9da9-cddf6656b2ac_1615970011.1811876.png" alt="closed_paren" title="Closed Parenthesis" width="200" height="200" /></p>

<p>This was intuition, now let go into mathematics: what does uniform distribution means, that if we choose small element inside our circle, than probability to get inside this element should be proportional to area of this element. Let us define <code class="language-plaintext highlighter-rouge">F(R)</code> cumulative distribution function (cdf) for radius. Then by definition probability to get between <code class="language-plaintext highlighter-rouge">R</code> and <code class="language-plaintext highlighter-rouge">R + dR</code> is equal to <code class="language-plaintext highlighter-rouge">F(R + dR) - F(R) = f(R)*dR</code>, where <code class="language-plaintext highlighter-rouge">f(R)</code> is probability density function (pdf), so probability to get into this small region is <code class="language-plaintext highlighter-rouge">f(R)* dR * dTheta</code>. From other point of view, area of this region can be calclated as <code class="language-plaintext highlighter-rouge">[(R+dR)^2 - R^2]*dTheta = 2*R*dR*dTheta</code>. From here we get, that <code class="language-plaintext highlighter-rouge">f(R) = c*R</code> for some constant <code class="language-plaintext highlighter-rouge">c</code> (because we say it is proportional, not equal). Now, <code class="language-plaintext highlighter-rouge">F'(R) = f(R)</code>, so <code class="language-plaintext highlighter-rouge">F(R) = c*R^2</code> (here <code class="language-plaintext highlighter-rouge">c</code> is another conatant). Now the question is how you generate data such that cumulative function is proportional to <code class="language-plaintext highlighter-rouge">R^2</code>. The answer is <strong>Inverse transform sampling</strong> (check wikipedia), where idea is given uniform distribution generate data from any distribution <code class="language-plaintext highlighter-rouge">F(R)</code>: we need to generate <code class="language-plaintext highlighter-rouge">R</code> from uniform distrubution and than apply inverse function, that is we have <code class="language-plaintext highlighter-rouge">sqrt(uniform(0,1))</code> in the end.</p>

<p><img src="https://assets.leetcode.com/users/images/ed0b4ca6-695b-4006-9985-968a1fc76279_1615969804.150301.png" alt="closed_paren" title="Closed Parenthesis" width="250" height="250" /></p>

<p><strong>Complexity</strong>: time and space complexity is just <code class="language-plaintext highlighter-rouge">O(1)</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">x_center</span><span class="p">,</span> <span class="n">y_center</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">radius</span><span class="p">,</span> <span class="n">x_center</span><span class="p">,</span> <span class="n">y_center</span>

    <span class="k">def</span> <span class="nf">randPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">r</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">R</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="bp">self</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">R</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)]</span>
</code></pre></div></div>

<p>If you like the solution, you can <strong>upvote</strong> it on leetcode discussion section:<a href="https://leetcode.com/problems/generate-random-point-in-a-circle/discuss/1113679/python-polar-coordinates-explained-with-diagrams-and-math"> <font color="blue">Problem 0478</font></a></p>

  </div><a class="u-url" href="/leetcode/0478.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>