<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Leetcode 1345. Jump Game IV | Dmitry Babichev algorithms</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Leetcode 1345. Jump Game IV" />
<meta name="author" content="Dmitry Babichev" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this problem we are asked to find shortest path between two nodes in some graph, so the first idea you should think is bfs (or Dijkstra algorithm). Actually, bfs is almost sufficient here, but we need to do one optimization which increase our speed dramatically." />
<meta property="og:description" content="In this problem we are asked to find shortest path between two nodes in some graph, so the first idea you should think is bfs (or Dijkstra algorithm). Actually, bfs is almost sufficient here, but we need to do one optimization which increase our speed dramatically." />
<meta property="og:site_name" content="Dmitry Babichev algorithms" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-04-01T17:33:19+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Leetcode 1345. Jump Game IV" />
<script type="application/ld+json">
{"url":"/leetcode/1345.html","@type":"BlogPosting","headline":"Leetcode 1345. Jump Game IV","dateModified":"2021-04-01T17:33:19+02:00","datePublished":"2021-04-01T17:33:19+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/1345.html"},"author":{"@type":"Person","name":"Dmitry Babichev"},"description":"In this problem we are asked to find shortest path between two nodes in some graph, so the first idea you should think is bfs (or Dijkstra algorithm). Actually, bfs is almost sufficient here, but we need to do one optimization which increase our speed dramatically.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Dmitry Babichev algorithms" />
    






  
  
</head>

    
    <!-- for mathjax support -->
    
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Dmitry Babichev algorithms</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/content/">Content</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <span>[
  
]</span>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Leetcode 1345. Jump Game IV</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-04-01T17:33:19+02:00" itemprop="datePublished">
        Apr 1, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>In this problem we are asked to find shortest path between two nodes in some graph, so the first idea you should think is bfs (or Dijkstra algorithm). Actually, bfs is almost sufficient here, but we need to do one optimization which increase our speed dramatically.</p>

<ol>
  <li>Let us use <code class="language-plaintext highlighter-rouge">d</code>: defaultdict, where for each value we keep list of all possible indexes for this value. We need this to make fast steps of type 3.</li>
  <li>Let <code class="language-plaintext highlighter-rouge">visited</code> be as usual set of visited nodes, we need it in usual bfs, not to visit any node two times.</li>
  <li>Let <code class="language-plaintext highlighter-rouge">visited_groups</code> be set of visited <strong>values</strong>: we need it for the following reason. Imagine, we have <code class="language-plaintext highlighter-rouge">arr = [1, 1, 1, 1, 1, 1, 1, 1, 1, 2]</code>. Then first time we see <code class="language-plaintext highlighter-rouge">1</code>, we visit all other <code class="language-plaintext highlighter-rouge">1</code>. Second time we see <code class="language-plaintext highlighter-rouge">1</code>, we do not need to check its neibors of type <code class="language-plaintext highlighter-rouge">3</code>, we already know that we visited them. Without this optimization time complexity can be potentially <code class="language-plaintext highlighter-rouge">O(n^2)</code>.</li>
  <li>What we do next is classical <strong>bfs</strong>: we extract node from queue, visit two neibors of types <code class="language-plaintext highlighter-rouge">1</code> and <code class="language-plaintext highlighter-rouge">2</code> and if we did not visit value of this node yet, we visit its all neibors of type <code class="language-plaintext highlighter-rouge">3</code>.</li>
</ol>

<p><strong>Complexity</strong>: time complexity is <code class="language-plaintext highlighter-rouge">O(n)</code>: we visit every index only once and try to visit every node no more than <code class="language-plaintext highlighter-rouge">3</code> times: for each type of neighbors. Space complexity is <code class="language-plaintext highlighter-rouge">O(n)</code> as well: to keep <code class="language-plaintext highlighter-rouge">visited</code> and <code class="language-plaintext highlighter-rouge">visited_groups</code> sets.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">minJumps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="n">d</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            
        <span class="n">queue</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
        <span class="n">visited</span><span class="p">,</span> <span class="n">visited_groups</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="nb">set</span><span class="p">()</span>
        
        <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
            <span class="n">steps</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">popleft</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="n">steps</span>
            
            <span class="k">for</span> <span class="n">neib</span> <span class="ow">in</span> <span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">neib</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="ow">and</span> <span class="n">neib</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                    <span class="n">visited</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">neib</span><span class="p">)</span>
                    <span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">neib</span><span class="p">))</span>
            
            <span class="k">if</span> <span class="n">arr</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited_groups</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">neib</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="n">arr</span><span class="p">[</span><span class="n">index</span><span class="p">]]:</span>
                    <span class="k">if</span> <span class="n">neib</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                        <span class="n">visited</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">neib</span><span class="p">)</span>
                        <span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">neib</span><span class="p">))</span>
                <span class="n">visited_groups</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</code></pre></div></div>

  </div><a class="u-url" href="/leetcode/1345.html" hidden></a>
</article>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Dmitry Babichev</li>
          <li><a class="u-email" href="mailto:dimitry008@gmail.com">dimitry008@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Here you can find solution to some algorithmic problems, at the moment it is mainly leetcode problems.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
The first part is used to enable inline equation.